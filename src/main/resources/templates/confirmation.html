<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>UTE FootBall - Xác Nhận Đặt Sân</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" th:href="@{/css/style.css}">
      <!-- Responsive-->
      <link rel="stylesheet" th:href="@{/css/responsive.css}">
      <!-- fevicon -->
      <link rel="icon" th:href="@{/images/fevicon.png}" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" th:href="@{/css/jquery.mCustomScrollbar.min.css}">
      <!-- Font Awesome -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
      <!-- Fancybox -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      <!-- Tweaks for older IEs-->
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
      <style>
        .main_content {
            padding: 50px 0;
            background-color: #f8f9fa;
            min-height: calc(100vh - 200px);
        }
        
        .booking_container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
        
        table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }

        table th, table td {
            padding: 15px;
            text-align: center;
            border: 1px solid #ddd;
        }

        table th {
            background-color: #f4f4f4;
            color: #333;
            font-weight: bold;
        }

        table td {
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        table td.disabled {
            background-color: #f8d7da;
            cursor: not-allowed;
            color: #721c24;
            position: relative;
        }

        table td.disabled::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            color: #dc3545;
        }

        table td:hover:not(.disabled) {
            background-color: #e9ecef;
            transform: scale(1.03);
        }
        
        .action-buttons {
            margin-top: 30px;
            text-align: center;
        }
        
        .action-buttons .btn {
            margin: 5px 10px;
            padding: 10px 25px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .action-buttons .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
      .modal-header {
  background-color: #5cb85c;
            color: white;
    border-bottom: none;
    padding: 15px 20px;
    display: flex;
    justify-content: center; /* Căn giữa */
    align-items: center;
}
        
        .time-slot.selected {
            background-color: #007bff;
            color: white;
            font-weight: bold;
        }

        /* Loader styles */
        .loader_bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }
        
        .loader {
            text-align: center;
        }
        
        .loader img {
            width: 100px;
            height: 100px;
        }
        
        .loader.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Improved modal styles */
        .modal-content {
            border-radius: 10px;
            border: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .modal-body {
            padding: 25px;
        }
        
        .modal-footer {
            border-top: 1px solid #e9ecef;
            padding: 15px 20px;
        }
        
        .payment-info {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .info-item {
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px dashed #e9ecef;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .field-name, .booking-date {
            font-weight: bold;
            color: #007bff;
        }
        
        .titlepage h2 {
            color: #343a40;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .titlepage h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background-color: #007bff;
        }
        
        .btn-group {
            display: flex;
            justify-content: space-between;
            width: 100%;
            align-items: center;
        }
        
        .btn-group p {
            margin: 0;
            color: #dc3545;
            font-size: 14px;
        }
        
        .modal-title {
            font-weight: 600;
        }
        
        .close {
            color: white;
            opacity: 0.8;
        }
        
        .close:hover {
            opacity: 1;
            color: white;
        }
        
        .qr-code-container {
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            display: inline-block;
        }
        
        /* Điều chỉnh nút Xác Nhận */
        #confirmButton {
            padding: 8px 20px; /* Thu nhỏ nút */
            margin-right: 15px; /* Cách ra khỏi nút Đóng */
        }
      </style>
   </head>
   <body class="main-layout">
      <!-- header -->
      <header>
         <div class="header">
            <div class="container">
               <div class="row">
                  <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                     <div class="full">
                        <div class="center-desk">
                           <div class="logo">
                              <a th:href="@{/}"><img th:src="@{/images/Logo_Trường_Đại_Học_Sư_Phạm_Kỹ_Thuật_TP_Hồ_Chí_Minh.png}" alt="#" /></a>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                     <nav class="navigation navbar navbar-expand-md navbar-dark">
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
                           <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarsExample04">
                           <ul class="navbar-nav mr-auto">
                              <li class="nav-item">
                                 <a class="nav-link" th:href="@{/home}">Trang chủ</a>
                              </li>
                              <li class="nav-item">
                                 <a class="nav-link" th:href="@{/gallery}">Thư viện ảnh</a>
                              </li>
                              <li class="nav-item active">
                                 <a class="nav-link" th:href="@{/booknow}">Đặt sân</a>
                              </li>
                              <li class="nav-item">
                                 <span th:if="${session.account != null}">
                                    <a class="nav-link" th:href="@{/profile}" th:text="${session.fullname} ?: 'Tài khoản'"></a>
                                 </span>
                                 <span th:if="${session.account == null}">
                                    <a class="nav-link" th:href="@{/login}">Đăng nhập/Đăng ký</a>
                                 </span>
                              </li>
                           </ul>
                        </div>
                     </nav>
                  </div>
               </div>
            </div>
         </div>
      </header>
      <!-- end header -->

      <!-- back_re section -->
      <div class="back_re">
         <div class="container">
            <div class="row">
               <div class="col-md-12">
                  <div class="title">
                     <h2>Xác Nhận Đặt Sân</h2>
                  </div>
               </div>
            </div>
         </div>
      </div>

      <!-- main content -->
      <div class="main_content">
         <div class="container">
            <div class="booking_container">
               <div class="row align-items-center">
                  <div class="col-md-6">
                     <div class="titlepage">
                        <h2>Thông Tin Sân</h2>
                        <div class="info-item">
                           <strong>Tên Sân:</strong> 
                           <span class="field-name" th:text="${fieldName}"></span>
                        </div>
                        <div class="info-item">
                           <strong>Ngày Đặt:</strong> 
                           <span class="booking-date" th:text="${bookingDate}"></span>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-6 text-center">
                     <img th:src="${fieldImage}" alt="Sân" class="img-fluid rounded shadow" style="max-height: 250px;">
                  </div>
               </div>

               <div class="row">
                  <div class="col-md-12">
                     <table>
                        <thead>
                           <tr>
                              <th>Buổi Sáng</th>
                              <th>Buổi Trưa</th>
                              <th>Buổi Tối</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td data-time="06h-07h" class="time-slot" th:classappend="${disabledTimes.contains('06h-07h')} ? 'disabled' : ''">06h-07h</td>
                              <td data-time="13h-14h" class="time-slot" th:classappend="${disabledTimes.contains('13h-14h')} ? 'disabled' : ''">13h-14h</td>
                              <td data-time="18h-19h" class="time-slot" th:classappend="${disabledTimes.contains('18h-19h')} ? 'disabled' : ''">18h-19h</td>
                           </tr>
                           <tr>
                              <td data-time="07h-08h" class="time-slot" th:classappend="${disabledTimes.contains('07h-08h')} ? 'disabled' : ''">07h-08h</td>
                              <td data-time="14h-15h" class="time-slot" th:classappend="${disabledTimes.contains('14h-15h')} ? 'disabled' : ''">14h-15h</td>
                              <td data-time="19h-20h" class="time-slot" th:classappend="${disabledTimes.contains('19h-20h')} ? 'disabled' : ''">19h-20h</td>
                           </tr>
                           <tr>
                              <td data-time="08h-09h" class="time-slot" th:classappend="${disabledTimes.contains('08h-09h')} ? 'disabled' : ''">08h-09h</td>
                              <td data-time="15h-16h" class="time-slot" th:classappend="${disabledTimes.contains('15h-16h')} ? 'disabled' : ''">15h-16h</td>
                              <td data-time="20h-21h" class="time-slot" th:classappend="${disabledTimes.contains('20h-21h')} ? 'disabled' : ''">20h-21h</td>
                           </tr>
                           <tr>
                              <td data-time="09h-10h" class="time-slot" th:classappend="${disabledTimes.contains('09h-10h')} ? 'disabled' : ''">09h-10h</td>
                              <td data-time="16h-17h" class="time-slot" th:classappend="${disabledTimes.contains('16h-17h')} ? 'disabled' : ''">16h-17h</td>
                              <td data-time="21h-22h" class="time-slot" th:classappend="${disabledTimes.contains('21h-22h')} ? 'disabled' : ''">21h-22h</td>
                           </tr>
                           <tr>
                              <td data-time="10h-11h" class="time-slot" th:classappend="${disabledTimes.contains('10h-11h')} ? 'disabled' : ''">10h-11h</td>
                              <td data-time="17h-18h" class="time-slot" th:classappend="${disabledTimes.contains('17h-18h')} ? 'disabled' : ''">17h-18h</td>
                              <td data-time="22h-23h" class="time-slot" th:classappend="${disabledTimes.contains('22h-23h')} ? 'disabled' : ''">22h-23h</td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>

               <div class="action-buttons">
                  <a th:href="@{/booknow}" class="btn btn-primary">
                     <i class="fa fa-arrow-left"></i> Trở về trang trước
                  </a>
                  <a th:href="@{/profile}" class="btn btn-info">
                     <i class="fa fa-history"></i> Lịch sử đặt sân
                  </a>
               </div>
            </div>
         </div>
      </div>

      <!-- Modal -->
      <div id="infoModal" class="modal fade" tabindex="-1" role="dialog">
         <div class="modal-dialog" role="document">
            <div class="modal-content">
               <div class="modal-header">
                  <h4 class="modal-title" style="font-size: 1.6rem;">Xác Nhận Đặt Sân</h4>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                  </button>
               </div>
               <div class="modal-body">
                  <div class="info-item">
                     <strong>Người đặt:</strong> <span th:text="${fullname}"></span>
                  </div>
                  <div class="info-item">
                     <strong>Tên Sân:</strong> <span th:text="${fieldName}"></span>
                  </div>
                  <div class="info-item">
                     <strong>Ngày Đặt:</strong> <span th:text="${bookingDate}"></span>
                  </div>
                  <div class="info-item">
                     <strong>Thời gian:</strong> <span id="modalBookingTime"></span>
                  </div>
                  <div class="payment-info">
                     <strong>Thanh toán:</strong>
                     <div class="qr-code-container">
                        <img th:src="@{/images/momo.jpg}" alt="Momo QR" class="img-fluid" style="width: 160px; height: auto;">
                     </div>
                     <p class="text-center mt-2"><small>Quét mã QR để thanh toán qua Momo</small></p>
                  </div>
               </div>
               <div class="modal-footer">
                  <div class="btn-group">
                     <p><strong>Chú ý: Điện thoại của bạn</strong> <strong>Quản lí sẽ gọi để xác nhận</strong></p>
                     <form action="/confirma" method="post" id="confirmForm">
                        <input type="hidden" name="fieldName" id="hiddenFieldName">
                        <input type="hidden" name="bookingDate" id="hiddenBookingDate">
                        <input type="hidden" name="bookingTime" id="hiddenBookingTime">
                        <button type="submit" id="confirmButton" class="btn btn-success">Xác Nhận</button>
                     </form>
                     <button id="closeModal" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                  </div>
               </div>
            </div>
         </div>
      </div>

      <!-- footer -->
      <footer>
         <div class="footer">
            <div class="container">
               <div class="row">
                  <div class="col-md-4">
                     <h3>Liên hệ</h3>
                     <ul class="conta">
                        <li><i class="fa fa-map-marker" aria-hidden="true"></i> Số 1 Đ.Võ Văn Ngân, Linh Chiểu, Thủ Đức, Hồ Chí Minh</li>
                        <li><i class="fa fa-mobile" aria-hidden="true"></i> +84 908617108</li>
                        <li style="display: flex; align-items: center;">
                           <i class="fa fa-envelope" aria-hidden="true"></i> 
                           <a href="https://mail.google.com/mail/u/0/#inbox?compose=new" style="margin-left: 5px; color: white;">
                              trungnh@hcmute.edu.vn
                           </a>
                        </li>
                     </ul>
                  </div>
                  <div class="col-md-4">
                     <h3>Liên kết</h3>
                     <ul class="link_menu">
                        <li><a class="nav-link" th:href="@{/home}">Trang chủ</a></li>
                        <li><a class="nav-link" th:href="@{/gallery}">Thư viện ảnh</a></li>
                        <li class="active"><a class="nav-link" th:href="@{/booknow}">Đặt sân</a></li>
                     </ul>
                  </div>
                  <div class="col-md-4">
                     <h3>Đánh giá</h3>
                     <form class="bottom_form">
                        <input class="enter" placeholder="Nhập đánh giá của bạn" type="text" name="">
                        <button class="sub_btn">gửi</button>
                     </form>
                     <ul class="social_icon">
                        <li><a href="https://www.facebook.com/profile.php?id=100063531161774"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                        <li><a href="https://youtube.com/shorts/RUyLJWVB3cQ?si=Uv1XTQnqq-qMscLa"><i class="fa fa-youtube-play" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-arrow-up" aria-hidden="true"></i></a></li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="copyright">
               <div class="container">
                  <div class="row">
                     <div class="col-md-10 offset-md-1">
                        <p>&copy; 2024 UTE Football. All rights reserved.</p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </footer>
      <!-- end footer -->

      <!-- Javascript files -->
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
      <script th:src="@{/js/jquery.mCustomScrollbar.concat.min.js}"></script>
      <script th:src="@{/js/custom.js}"></script>

      <script>
         $(document).ready(function () {
            $(".time-slot").click(function () {
               if ($(this).hasClass("disabled")) {
                  return; // Không làm gì nếu ô bị vô hiệu hóa
               }

               bookingTime = $(this).data("time");

               // Cập nhật thông tin trong modal
               $("#modalBookingTime").text(bookingTime);
               $("#hiddenBookingTime").val(bookingTime);
               $("#hiddenFieldName").val($(".field-name").text());
               $("#hiddenBookingDate").val($(".booking-date").text());

               // Hiển thị modal
               $("#infoModal").modal("show");
            });

            // Đóng modal khi nhấn nút đóng
            $("#closeModal").click(function () {
               $("#infoModal").modal("hide");
            });
         });
      </script>
   </body>
</html>